"use strict";(self.webpackChunksoftware_designs_and_algorithms=self.webpackChunksoftware_designs_and_algorithms||[]).push([[2931],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return m}});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var o=n.createContext({}),c=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(a),m=i,h=u["".concat(o,".").concat(m)]||u[m]||d[m]||r;return a?n.createElement(h,l(l({ref:t},p),{},{components:a})):n.createElement(h,l({ref:t},p))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=u;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var c=2;c<r;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},7622:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),l=["components"],s={sidebar_position:6},o="5. Interface",c={unversionedId:"building-blocks-of-oop-part-1/interface",id:"building-blocks-of-oop-part-1/interface",title:"5. Interface",description:"As mentioned earlier, OOP is directly related to messages sent between objects. Moreover, it is important not only what objects know what behavior they have inside, on whom they depend (to whom messages are sent), but also how they communicate with each other. Objects communicate through interfaces.",source:"@site/docs/2-building-blocks-of-oop-part-1/interface.md",sourceDirName:"2-building-blocks-of-oop-part-1",slug:"/building-blocks-of-oop-part-1/interface",permalink:"/docs/building-blocks-of-oop-part-1/interface",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"4. Inheritance in Details",permalink:"/docs/building-blocks-of-oop-part-1/inheritance_in_details"},next:{title:"6. Object-oriented Design Introduction",permalink:"/docs/building-blocks-of-oop-part-1/object-oriented_design_introduction"}},p={},d=[{value:"5.1 When Should a Class Implement an Interface?",id:"51-when-should-a-class-implement-an-interface",level:2},{value:"5.2 When Should a Class Depend on an Interface?",id:"52-when-should-a-class-depend-on-an-interface",level:2},{value:"5.3 Interface vs Abstract Class",id:"53-interface-vs-abstract-class",level:2},{value:"5.4 Summary: Creating a Message-Based Application",id:"54-summary-creating-a-message-based-application",level:2}],u={toc:d};function m(e){var t=e.components,s=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,n.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"5-interface"},"5. Interface"),(0,r.kt)("p",null,"As mentioned earlier, OOP is directly related to messages sent between objects. Moreover, it is important not only what objects know what behavior they have inside, on whom they depend (to whom messages are sent), but also how they communicate with each other. Objects communicate through interfaces."),(0,r.kt)("p",null,"Figure 5.1 - Interface"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img.png",src:a(4855).Z,width:"1870",height:"662"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Public Interfaces")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Reveal its primary responsibility."),(0,r.kt)("li",{parentName:"ul"},"Are expected to be invoked by others."),(0,r.kt)("li",{parentName:"ul"},"Will not change on a whim."),(0,r.kt)("li",{parentName:"ul"},"Are safe for others to depend on."),(0,r.kt)("li",{parentName:"ul"},"Are thoroughly documented in the tests.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Private Interfaces")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Handle implementation details."),(0,r.kt)("li",{parentName:"ul"},"Are not expected to be sent by other objects."),(0,r.kt)("li",{parentName:"ul"},"Can change for any reason whatsoever."),(0,r.kt)("li",{parentName:"ul"},"Are unsafe for others to depend on."),(0,r.kt)("li",{parentName:"ul"},"May not even be referenced in the tests.")),(0,r.kt)("p",null,"What do interfaces give us? The presence of interfaces allows you to think about the task in a more abstract way, ignoring minor details. There are different levels of abstraction or ignorance of details."),(0,r.kt)("h2",{id:"51-when-should-a-class-implement-an-interface"},"5.1 When Should a Class Implement an Interface?"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Class implements Strategy pattern, or it is part of family of objects: IRepository, IFormatter, IPrecondition."),(0,r.kt)("li",{parentName:"ol"},"Class implements role interface (as a result of ISP): ICloneable, IComparable, etc."),(0,r.kt)("li",{parentName:"ol"},"Class implements interface required for connection with other classes. Class is an Adapter, the need for an interface is determined by DIP;"),(0,r.kt)("li",{parentName:"ol"},"Class implements interface, because external environment depends on it. Provides testability to users of this class. This is not a single reason to create an interface.")),(0,r.kt)("h2",{id:"52-when-should-a-class-depend-on-an-interface"},"5.2 When Should a Class Depend on an Interface?"),(0,r.kt)("p",null,"When should a class depend on an interface? For example, getting it through the constructor. The arguments of the class indicate that he cannot take some decision on his own, and he needs help from the called class. It's easiest when a class depends on primitives, a little more complicated when it depends on specific classes, and most difficult when it depends on an interface."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Class deals with family of types: the "family of types" exists already and defined by requirements of existing model.'),(0,r.kt)("li",{parentName:"ol"},"As a result of DIP: class wants to communicate with object of another level, it defines the interface by itself and requires its implementation."),(0,r.kt)("li",{parentName:"ol"},"For testing purposes: useful in case if implementation of the abstraction relies on external environment.")),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Don\'t create interfaces "Just in case"!'))),(0,r.kt)("div",{style:{display:"flex",gap:"5%"}},(0,r.kt)("div",{style:{width:"40%"}},"Figure 5.2 - Simple sequence diagram",(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("img",{width:"100%",src:a(7617).Z,alt:"Simple sequence diagram"})),(0,r.kt)("div",{style:{width:"40%"}},"Figure 5.3 - Moe talks to Trip and Bicycle",(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("img",{width:"100%",src:a(8711).Z,alt:"Moe talks to Trip and Bicycle"}))),(0,r.kt)("p",null,"Each route is rated according to its difficulty. Mountain bike rides have an additional difficulty rating. Clients have a certain level of fitness and technical skill level for mountain biking, based on this we can determine if the requested ride is suitable for them."),(0,r.kt)("p",null,"Customers can rent bicycles, or they can bring their own."),(0,r.kt)("p",null,'Should the Trip class be responsible for figuring out if there is a suitable bike for each given trip? Or more generally "Should the recipient of this message (',(0,r.kt)("inlineCode",{parentName:"p"},"Trip"),') be responsible for responding to this message?"'),(0,r.kt)("p",null,"The Trip class will respond to the ",(0,r.kt)("inlineCode",{parentName:"p"},"suitable_trips")," message, and the Bicycle class will respond to the ",(0,r.kt)("inlineCode",{parentName:"p"},"suitable_bicycle"),' message. The customer can get the result if it communicates with 2 objects. Asking for "What" Instead of Telling "How".'),(0,r.kt)("div",{style:{display:"flex",gap:"5%"}},(0,r.kt)("div",{style:{width:"40%"}},"Figure 5.4 - Trip tells a Mechanic how to prepare each Bicycle",(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("img",{width:"100%",src:a(9785).Z,alt:"Trip tells a Mechanic how to prepare each Bicycle****"})),(0,r.kt)("div",{style:{width:"40%"}},"Figure 5.5 - Trip asks a Mechanic to prepare each Bicycle",(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("img",{width:"100%",src:a(6772).Z,alt:"Trip asks a Mechanic to prepare each Bicycle"}))),(0,r.kt)("p",null,"1st diagram: the ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," is almost ready, and it needs to make sure that all the bicycles that will be participating in it are ready for it. Thus, the ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," must know exactly how to prepare the bike and what messages and in what sequence to send to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Mechanic"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," each every bike, it washes it, fixes it and gives it away for a ride."),(0,r.kt)("p",null,"The downside is that the ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," needs to know this whole big ",(0,r.kt)("inlineCode",{parentName:"p"},"Mechanic")," interface, and secondly, if the mechanic starts implementing new behavior, we will need to update the ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," class."),(0,r.kt)("p",null,"In the 2nd diagram, ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," asks the ",(0,r.kt)("inlineCode",{parentName:"p"},"Mechanic")," to prepare each bike, leaving the implementation details to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Mechanic"),"."),(0,r.kt)("p",null,"This refactoring greatly improves support and extensibility. But this is not an ideal solution yet, because ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," knows about bicycles as well as about mechanics, perhaps in the future this interface can also be reduced."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Messages to Discover Objects")),(0,r.kt)("div",{style:{width:"50%"}},"Figure 5.6 - Moe asks the TripFinder for a suitable trip",(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("img",{width:"100%",src:a(8248).Z,alt:"Moe asks the TripFinder for a suitable trip"})),(0,r.kt)("p",null,"This diagram is already based on refactoring. We have created the ",(0,r.kt)("inlineCode",{parentName:"p"},"TripFinder")," class, which aggregates the ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," class and the ",(0,r.kt)("inlineCode",{parentName:"p"},"Bicycle")," class in itself, it refers to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Trip")," class and says - tell us what are the available trips and for each available trip checks the required bike, and the user returns the list of available trips."),(0,r.kt)("p",null,"At this stage, ",(0,r.kt)("inlineCode",{parentName:"p"},"TripFinder")," implements the logic of working with our internal systems."),(0,r.kt)("h2",{id:"53-interface-vs-abstract-class"},"5.3 Interface vs Abstract Class"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameters"),(0,r.kt)("th",{parentName:"tr",align:null},"Interface"),(0,r.kt)("th",{parentName:"tr",align:null},"Abstract class"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Multiple inheritances"),(0,r.kt)("td",{parentName:"tr",align:null},"Implement several interfaces"),(0,r.kt)("td",{parentName:"tr",align:null},"Only one abstract class")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Structure"),(0,r.kt)("td",{parentName:"tr",align:null},"Abstract methods"),(0,r.kt)("td",{parentName:"tr",align:null},"Abstract & concrete methods")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"When to use"),(0,r.kt)("td",{parentName:"tr",align:null},"Future enhancements"),(0,r.kt)("td",{parentName:"tr",align:null},"To avoid independence")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Adding new methods"),(0,r.kt)("td",{parentName:"tr",align:null},"Could be hard"),(0,r.kt)("td",{parentName:"tr",align:null},"Easy to do")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Access modifiers"),(0,r.kt)("td",{parentName:"tr",align:null},"Only public"),(0,r.kt)("td",{parentName:"tr",align:null},"Public, protected, private")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Usage"),(0,r.kt)("td",{parentName:"tr",align:null},"Defines the peripheral abilities of a class"),(0,r.kt)("td",{parentName:"tr",align:null},"Defines the identity of a class")))),(0,r.kt)("p",null,"An interface is more flexible from a client's point of view: any class can implement any interface. But the interface is ",(0,r.kt)("strong",{parentName:"p"},'"stiffer"')," from the point of view of its developer: it is more difficult to change it (the work of all clients will be broken), restrictions cannot be imposed on the client's constructor, and the code cannot be reused."),(0,r.kt)("p",null,"Important Reasons For Using Interfaces:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Interfaces are used to achieve abstraction."),(0,r.kt)("li",{parentName:"ul"},"Designed to support dynamic method resolution at run time"),(0,r.kt)("li",{parentName:"ul"},"It helps you to achieve loose coupling."),(0,r.kt)("li",{parentName:"ul"},"Allows you to separate the definition of a method from the inheritance hierarchy")),(0,r.kt)("p",null,"An abstract class is ",(0,r.kt)("strong",{parentName:"p"},'"stiffer"'),' from the clients\' point of view: the client will be forced to abandon the current base class. But an abstract class is "more flexible" from the point of view of its developer: it allows you to reuse code, restrict the constructor of descendants, allow you to make changes (easily add a virtual method without breaking existing clients), and more clearly define a "contract" with descendants using Template Methods.'),(0,r.kt)("p",null,"Important Reasons For Using Abstract Class:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Abstract classes offer default functionality for the subclasses."),(0,r.kt)("li",{parentName:"ul"},"Provides a template for future specific classes"),(0,r.kt)("li",{parentName:"ul"},"Helps you to define a common interface for its subclasses"),(0,r.kt)("li",{parentName:"ul"},"Abstract class allows code reusability.")),(0,r.kt)("h2",{id:"54-summary-creating-a-message-based-application"},"5.4 Summary: Creating a Message-Based Application"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("em",{parentName:"li"},"Create Explicit Interfaces")," - every time you create a class, declare its interfaces. Methods in the ",(0,r.kt)("em",{parentName:"li"},"public")," interface should:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Be explicitly identified as such."),(0,r.kt)("li",{parentName:"ul"},"Be more about what than how."),(0,r.kt)("li",{parentName:"ul"},"Have names that, insofar as you can anticipate, will not change."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("em",{parentName:"li"},"Honor the Public Interfaces of Others")," - do your best to interact with other classes using only their public interfaces."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("em",{parentName:"li"},"Exercise Caution When Depending on Private Interfaces")," - despite your best efforts, you may find that you must depend on a private interface, this is a dangerous dependency that should be isolated."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("em",{parentName:"li"},"Minimize Context")," - construct public interfaces with an eye toward minimizing the context they require from others. Keep the ",(0,r.kt)("em",{parentName:"li"},"what")," versus ",(0,r.kt)("em",{parentName:"li"},"how")," distinction in mind; create public methods that allow senders to get what they want without knowing how your class implements its behavior.")))}m.isMDXComponent=!0},8248:function(e,t,a){t.Z=a.p+"assets/images/moe_asks_the_tripfinder_for_a_suitable_trip-193685647a74f3a1794be9bb151961fd.jpg"},8711:function(e,t,a){t.Z=a.p+"assets/images/moe_talks_to_trip_and_bicycle-97e426968041cb4f28b54457ac2bf9b9.jpg"},7617:function(e,t,a){t.Z=a.p+"assets/images/simple_sequence_diagram-2a7b0af95c511b78902deb16421a2a96.jpg"},6772:function(e,t,a){t.Z=a.p+"assets/images/trip_asks_a_mechanic_to_prepare_each_bicycle-961180d3d67b0782ed9607c89ee21b7d.jpg"},9785:function(e,t,a){t.Z=a.p+"assets/images/trip_tells_a_mechanic_how_to_prepare_each_bicycle-5e67d39afba03a359b9c5b5c66c8dc1c.jpg"},4855:function(e,t,a){t.Z=a.p+"assets/images/interface-8e7762a2898af0d0bc4842eddaf155b8.jpg"}}]);