"use strict";(self.webpackChunksoftware_designs_and_algorithms=self.webpackChunksoftware_designs_and_algorithms||[]).push([[248],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),h=c(n),u=i,m=h["".concat(l,".").concat(u)]||h[u]||d[u]||o;return n?a.createElement(m,s(s({ref:t},p),{},{components:n})):a.createElement(m,s({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=h;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"==typeof e?e:i,s[1]=r;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5991:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return r},metadata:function(){return c},toc:function(){return d}});var a=n(7462),i=n(3366),o=(n(7294),n(3905)),s=["components"],r={sidebar_position:5},l="4. Inheritance in Details",c={unversionedId:"building-blocks-of-oop-part-1/inheritance_in_details",id:"building-blocks-of-oop-part-1/inheritance_in_details",title:"4. Inheritance in Details",description:"4.1 Intro",source:"@site/docs/2-building-blocks-of-oop-part-1/inheritance_in_details.md",sourceDirName:"2-building-blocks-of-oop-part-1",slug:"/building-blocks-of-oop-part-1/inheritance_in_details",permalink:"/docs/building-blocks-of-oop-part-1/inheritance_in_details",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"3. Principles of OOP",permalink:"/docs/building-blocks-of-oop-part-1/principles_of_oop"},next:{title:"5. Interface",permalink:"/docs/building-blocks-of-oop-part-1/interface"}},p={},d=[{value:"4.1 Intro",id:"41-intro",level:2},{value:"4.2 Recognizing Where to Use Inheritance",id:"42-recognizing-where-to-use-inheritance",level:2},{value:"4.3 Creating an Abstract Superclass with Shared Abstract Behavior",id:"43-creating-an-abstract-superclass-with-shared-abstract-behavior",level:2},{value:"4.4 Template Method Pattern: Default Implementation",id:"44-template-method-pattern-default-implementation",level:2},{value:"4.5 Using Hook Messages: Decoupling Subclasses",id:"45-using-hook-messages-decoupling-subclasses",level:2},{value:"4.6 Summary",id:"46-summary",level:2}],h={toc:d};function u(e){var t=e.components,r=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},h,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"4-inheritance-in-details"},"4. Inheritance in Details"),(0,o.kt)("h2",{id:"41-intro"},"4.1 Intro"),(0,o.kt)("p",null,"JavaScript is a bit confusing for developers experienced in class-based languages (like Java or C++), as it is dynamic and does not provide a ",(0,o.kt)("inlineCode",{parentName:"p"},"class")," implementation per se (the ",(0,o.kt)("inlineCode",{parentName:"p"},"class")," keyword is introduced in ES2015, but is syntactical sugar, JavaScript remains prototype-based)."),(0,o.kt)("p",null,"When it comes to inheritance, JavaScript only has one construct: objects. Each object has a private property which holds a link to another object called its ",(0,o.kt)("inlineCode",{parentName:"p"},"prototype"),". That prototype object has a prototype of its own, and so on until an object is reached with ",(0,o.kt)("inlineCode",{parentName:"p"},"null")," as its prototype. By definition, ",(0,o.kt)("inlineCode",{parentName:"p"},"null")," has no prototype, and acts as the final link in this ",(0,o.kt)("inlineCode",{parentName:"p"},"prototype")," chain."),(0,o.kt)("p",null,"Nearly all objects in JavaScript are instances of ",(0,o.kt)("inlineCode",{parentName:"p"},"Object")," which sits on the top of a prototype chain."),(0,o.kt)("p",null,"While this confusion is often considered to be one of JavaScript's weaknesses, the prototypal inheritance model itself is, in fact, more powerful than the classic model. It is, for example, fairly trivial to build a classic model on top of a prototypal model."),(0,o.kt)("p",null,"Inheritance mechanisms, which play a key role in the object approach in terms of extensibility and reuse, model the relationship (IS-A relationship) and exploit the relationship between the base class and its descendant."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Inheritance is the mechanism of basing an object or class upon another object (prototypical inheritance) or class (class-based inheritance), retaining similar implementation."))),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},'In most class-based object-oriented languages, an object created through inheritance (a "child object") acquires all the properties and behaviors of the parent object'))),(0,o.kt)("p",null,"Experienced developers can tell you that overuse of inheritance leads to code that is difficult to understand and maintain. This is primarily because the IS-A relationship is much stronger than the relationship that appears during composition. Therefore, when making changes, you need to be very careful and see if any methods have been overridden, what is the contract of the parent class, at the level of coupling."),(0,o.kt)("p",null,"Inheritance is essentially an automatic message delegation mechanism. Inheritance creates a relationship in which if one object cannot respond to a received message, it passes that message to another. And this transfer happens automatically."),(0,o.kt)("h2",{id:"42-recognizing-where-to-use-inheritance"},"4.2 Recognizing Where to Use Inheritance"),(0,o.kt)("p",null,"Let's look at an example where inheritance can be applied. Let's imagine that we want to rent a bike."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Listing 4.1"',title:'"Listing','4.1"':!0},"class Bicycle {\n    constructor(options) {\n        this.size = options.size;\n        this.tapeColor = options.tapeColor;\n    };\n\n    spares() {\n        return {\n            chain: '11-speed',\n            tireSize: '28',\n            tapeColor: this.tapeColor,\n        };\n    };\n}\n\nconst bike = new Bicycle({size: 'M', tapeColor: 'red'});\n\nbike.size; // => 'M'\nbike.spares(); // => {chain: '11-speed', tireSize: '28', tapeColor: 'red'}\n")),(0,o.kt)("p",null,"And we need to know what parts need to be replaced in case of a breakdown, so we added ",(0,o.kt)("inlineCode",{parentName:"p"},"spares")," method."),(0,o.kt)("p",null,"But what happens if we add another bike style? For example, a mountain bike. Now our method looks a little strange."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Listing 4.2"',title:'"Listing','4.2"':!0},"class Bicycle {\n    constructor(options) {\n        // previous options\n        this.style = options.style;\n        this.frontShock = options.frontShock;\n    };\n\n    spares() {\n        if (this.style === 'road') {\n            return {\n                chain: '11-speed',\n                tireSize: '28',\n                tapeColor: this.tapeColor,\n            };\n        }\n\n        return {\n            chain: '11-speed',\n            tireSize: '29',\n            frontShock: this.frontShock,\n        };\n    };\n}\n\nconst crossCountryBike = new Bicycle({style: 'XC', size: 'M', frontShock: 'mountain'});\nconst roadBike = new Bicycle({style: 'road', size: 'M', tapeColor: 'red'});\n")),(0,o.kt)("p",null,"We added 2 new arguments for ",(0,o.kt)("inlineCode",{parentName:"p"},"MountainBike"),". The new ",(0,o.kt)("inlineCode",{parentName:"p"},"style")," property defines what the ",(0,o.kt)("inlineCode",{parentName:"p"},"spares")," method (details) will return using the ",(0,o.kt)("inlineCode",{parentName:"p"},"if")," statement inside the method.\nAlready this code is hard to maintain, and if we need to add another type of bicycles, our code will turn into a big dump.\nIt's time for an Abstract class."),(0,o.kt)("p",null,"Figure 1.1 \u2013 Abstract class"),(0,o.kt)("img",{width:"500",src:n(1643).Z,alt:"Abstract class"}),(0,o.kt)("p",null,"Subclasses are specializations of their superclasses. ",(0,o.kt)("inlineCode",{parentName:"p"},"MountainBike")," should have everything a ",(0,o.kt)("inlineCode",{parentName:"p"},"Bicycle")," plus something else.\nThe picture above shows a class diagram where ",(0,o.kt)("inlineCode",{parentName:"p"},"Bicycle")," is a superclass for ",(0,o.kt)("inlineCode",{parentName:"p"},"MountainBike")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"RoadBike"),". The ",(0,o.kt)("inlineCode",{parentName:"p"},"Bicycle")," will contain general behavior, and ",(0,o.kt)("inlineCode",{parentName:"p"},"MountainBike")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"RoadBike")," will add specializations. The public interface of the ",(0,o.kt)("inlineCode",{parentName:"p"},"Bicycle")," should include a ",(0,o.kt)("inlineCode",{parentName:"p"},"spares")," method and a ",(0,o.kt)("inlineCode",{parentName:"p"},"size")," property, and the interfaces of its subclasses will add the necessary parts.\nThe ",(0,o.kt)("inlineCode",{parentName:"p"},"Bicycle")," is now an abstract class."),(0,o.kt)("h2",{id:"43-creating-an-abstract-superclass-with-shared-abstract-behavior"},"4.3 Creating an Abstract Superclass with Shared Abstract Behavior"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Listing 4.3"',title:'"Listing','4.3"':!0},"abstract class Bicycle {\n    // keep only common parts\n}\n\nclass RoadBike extends Bicycle {\n    constructor(options) {\n        super(options);\n\n        this.tapeColor = options.tapeColor;\n    };\n\n    spares() {\n        return {\n            ...super.spares(),\n            tapeColor: this.tapeColor,\n        };\n    };\n}\n\nclass MountainBike extends Bicycle {\n    constructor(options) {\n        super(options);\n\n        this.frontShock = options.frontShock;\n    };\n\n    spares() {\n        return {\n            ...super.spares(),\n            frontShock: this.frontShock,\n        };\n    };\n}\n")),(0,o.kt)("p",null,"Abstract classes exist in order to inherit from them. They provide a common repository that stores the behavior common to all subclasses, and each of them is a specialization of an abstract class.\nIt almost never makes sense to create an abstract superclass with a single subclass."),(0,o.kt)("h2",{id:"44-template-method-pattern-default-implementation"},"4.4 Template Method Pattern: Default Implementation"),(0,o.kt)("p",null,"This gives subclasses the ability to inject specialization by overriding the default values set in the parent class. This technique of describing the basic structure/algorithm in a superclass and redefining parts of this structure/algorithm to those that are already specific for a particular class is called the template method."),(0,o.kt)("p",null,"Bicycle now provides a structure, a general algorithm, for its subclasses. In those places where the base class provides the ability to influence this algorithm to the derived classes, it sends messages ",(0,o.kt)("inlineCode",{parentName:"p"},"defaultChain")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"defaultTireSize"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Listing 4.4"',title:'"Listing','4.4"':!0},"abstract class Bicycle {\n    protected readonly defaultChain = '11-speed';\n\n    constructor(opts) {\n        // ...\n        this.chain = opts.chain || this.defaultChain;\n        this.tireSize = opts.tireSize || this.defaultTireSize;\n    };\n}\n\nclass RoadBike extends Bicycle {\n    protected readonly defaultTireSize = '28';\n}\n\nclass MountainBike extends Bicycle {\n    protected readonly defaultTireSize = '29';\n}\n")),(0,o.kt)("p",null,"Something similar can be found in ReactJs library. When creating a component, it has methods ",(0,o.kt)("inlineCode",{parentName:"p"},"componentDidMount()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"shouldComponentUpdate()")," you can change their implementation yourself."),(0,o.kt)("p",null,"Okay, we split the ",(0,o.kt)("inlineCode",{parentName:"p"},"MountainBike")," and the ",(0,o.kt)("inlineCode",{parentName:"p"},"RoadBike"),", but now there are new problems:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Mountain bike and road bike classes depend on their abstract class;"),(0,o.kt)("li",{parentName:"ul"},"Abstract class depends on children;"),(0,o.kt)("li",{parentName:"ul"},"If you forget to call super methods \u2013 the result might not contain all data required;"),(0,o.kt)("li",{parentName:"ul"},"Users of road and mountain bike depend on the abstract class, even if they don't know anything about it.")),(0,o.kt)("h2",{id:"45-using-hook-messages-decoupling-subclasses"},"4.5 Using Hook Messages: Decoupling Subclasses"),(0,o.kt)("p",null,"This strategy removes the knowledge of the algorithm from the subclass and returns control to the superclass. Which was done by adding the ",(0,o.kt)("inlineCode",{parentName:"p"},"postInitialize")," method."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"RoadBike")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"MountainBike")," no longer control the initialization process, but instead bring specialization to a more abstract algorithm. This algorithm is defined in the abstract superclass ",(0,o.kt)("inlineCode",{parentName:"p"},"Bicycle"),", which in turn is responsible for sending ",(0,o.kt)("inlineCode",{parentName:"p"},"postInitialize"),". To achieve this result Bicycle constructor should always be called, this will happen automatically if derived classes will have no constructor."),(0,o.kt)("p",null,"This same technique can be used to remove the dispatch of super in the ",(0,o.kt)("inlineCode",{parentName:"p"},"spares")," method."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Listing 4.5"',title:'"Listing','4.5"':!0}," abstract class Bicycle {\n     constructor(opts) {\n         this.size = opts.size;\n         this.chain = opts.chain;\n         this.tireSize = opts.tireSize;\n\n         this.postInitialize(opts);\n     };\n \n    protected postInitialize() {};\n \n    spares() {\n         return {\n             tireSize: this.tireSize,\n             chain: this.chain,\n             ...this.localSpares()\n         };\n     };\n }\n \nclass RoadBike extends Bicycle {\n    protected postInitialize(opts) {\n        this.tapeColor = opts.tapeColor;\n    };\n\n    protected localSpares() {\n        return { tapeColor: this.tapeColor };\n    };\n}\n\nclass MountainBike extends Bicycle {\n    protected postInitialize(opts) {\n        this.frontShock = opts.frontShock;\n    };\n\n    protected localSpares() {\n        return { frontShock: this.frontShock };\n    };\n}\n")),(0,o.kt)("h2",{id:"46-summary"},"4.6 Summary"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Inheritance solves the problem of related types that share a great deal of common behavior but differ across some dimension;"),(0,o.kt)("li",{parentName:"ul"},"The best way to create an abstract superclass is by pushing code up from concrete subclasses;"),(0,o.kt)("li",{parentName:"ul"},"Abstract superclasses use the template method pattern to invite inheritors to supply specializations, and they use hook methods to allow these inheritors to contribute these specializations without being forced to send super;"),(0,o.kt)("li",{parentName:"ul"},"Well-designed inheritance hierarchies are easy to extend with new subclasses, even for programmers who know very little about the application;")))}u.isMDXComponent=!0},1643:function(e,t,n){t.Z=n.p+"assets/images/abstract_class-aa553d48035e397867b81f0b3f5aa252.jpg"}}]);